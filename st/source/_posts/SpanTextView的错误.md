---
title: SpanTextView的错误
date: 2018-02-23 10:20:57
tags: - SpanTextView 
      - 重构
---

SpanTextView 一开始几乎提供了所有常用的方法，比如设置文字大小，颜色等等。这样做带来的问题是，我必须保存所有的这些属性，然后在应用的时候让他们集中生效。但是有一种情况是特例，就是图片，我必须对图片分开处理。一开始就是这么做的，后来发现总觉得哪里不对。直到我需要对图片做特殊处理的时候————图片文字居中对齐————所以之前的东西变得非常臃肿。所以我为什么不应该是让使用者自己提供Span，而不是我去罗列可能存在的诸多Span————这样必然导致对自定义的不友好！虽然我也提供了apply方法对自定义的支持，然而意义不大。所以最好的是提让使用者自己提供Span,并且告诉我们是对哪段文字施加。这样的好处是整个核心任务变成只需要处理Span的应用，而不是之前的大段的工具方法和变量保存以及防御性的判断，当然一些常规的Span可以提供。
